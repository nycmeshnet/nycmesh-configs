# NYC Mesh hEX PoE switch config
# hEX PoE
:global nodenumber {{nodenumber}}

/delay 15

:beep frequency=500 length=100ms
:beep frequency=600 length=100ms

/interface bridge
add name=mesh fast-forward=yes protocol-mode=none comment=("nycmesh-" . $nodenumber . "-hex (switch config)")

:beep frequency=700 length=100ms

/interface ethernet
set [ find default-name=ether1 ] comment="trunk to router"

:beep frequency=800 length=100ms

:beep frequency=900 length=100ms

/ip dhcp-client add dhcp-options=hostname,clientid disabled=no interface=mesh

:beep frequency=1000 length=100ms

/interface bridge port
add bridge=mesh hw=yes interface=ether1
add bridge=mesh hw=yes interface=ether2
add bridge=mesh hw=yes interface=ether3
add bridge=mesh hw=yes interface=ether4
add bridge=mesh hw=yes interface=ether5
add bridge=mesh interface=sfp1 disabled=yes

:beep frequency=1100 length=100ms

/interface ethernet switch port
set 0 vlan-mode=fallback
set 1 vlan-mode=fallback
set 2 vlan-mode=fallback
set 3 vlan-mode=fallback
set 4 vlan-mode=fallback

:beep frequency=1200 length=100ms
:beep frequency=1300 length=100ms

/interface ethernet switch port-isolation
set 1 forwarding-override=ether1
set 2 forwarding-override=ether1
set 3 forwarding-override=ether1
set 4 forwarding-override=ether1

:beep frequency=1400 length=100ms

/ip dns set allow-remote-requests=yes servers=10.10.10.10,1.1.1.1

:beep frequency=1500 length=100ms

:beep frequency=1600 length=100ms

:beep frequency=1700 length=100ms

/snmp set enabled=no

:beep frequency=1800 length=100ms

/system identity set name=("nycmesh-" . $nodenumber . "-hex")

/system clock set time-zone-name=America/New_York time-zone-autodetect=no
/system ntp client set enabled=yes primary-ntp=10.10.10.123 server-dns-names=0.pool.ntp.org

/delay 2

:beep frequency=220 length=200ms;
:delay 200ms;
:beep frequency=880 length=200ms;
:delay 200ms;
